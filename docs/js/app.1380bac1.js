(function(){"use strict";var e={9817:function(e,t,s){var i=s(6369),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app d-flex flex-column vw-100 vh-100 antiselect overflow-hidden"},[t("div",{staticClass:"d-flex justify-content-end p-3"},[e.open?e._e():t("MenuIcon",{staticClass:"top-most",on:{click:e.toggleSettings}}),e.open?t("XIcon",{staticClass:"top-most",on:{click:e.toggleSettings}}):e._e()],1),t("Tempe"),t("EnergieMeter"),t("tasks"),t("Settings",{attrs:{open:e.open},on:{save:e.onSave}}),e.isRefresh?t("button",{staticClass:"position-absolute btn btn-dark shadow u-btn",on:{click:e.update}},[e._v(" Update ")]):e._e()],1)},a=[],o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"position-absolute top-0 start-0 vh-100 vw-100 d-flex align-items-end animated",class:{zIn:e.open,zOut:!e.open}},[t("div",{staticClass:"d-flex flex-column justify-content-center bg-white shadow-lg p-3 vh-100 vw-100 animated",class:{slideInUp:e.open,slideOutDown:!e.open},attrs:{id:"set"}},[t("p",{staticClass:"display-6 mt-5"},[e._v("Settings")]),t("p",[e._v("Google Calender Api")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.google.client_id,expression:"google.client_id"}],staticClass:"form-control mb-1",attrs:{type:"text",placeholder:"CLIENT_ID: DDFG$§T"},domProps:{value:e.google.client_id},on:{input:function(t){t.target.composing||e.$set(e.google,"client_id",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.google.api_key,expression:"google.api_key"}],staticClass:"form-control mb-1",attrs:{type:"text",placeholder:"API_KEY: 2WR3..."},domProps:{value:e.google.api_key},on:{input:function(t){t.target.composing||e.$set(e.google,"api_key",t.target.value)}}}),t("p",[e._v("Openweather")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.openweather.url,expression:"openweather.url"}],staticClass:"form-control mb-1",attrs:{type:"text",placeholder:"URL: https://api.openweathermap.org/data/2.5/forecast/?q=London,de&appid=8021b4e46c033f8148e926c465998bee&units=metric&lang=de&cnt=10"},domProps:{value:e.openweather.url},on:{input:function(t){t.target.composing||e.$set(e.openweather,"url",t.target.value)}}}),t("p",[e._v("Shelly")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.shelly.server_url,expression:"shelly.server_url"}],staticClass:"form-control mb-1",attrs:{type:"text",placeholder:"server_url: ..."},domProps:{value:e.shelly.server_url},on:{input:function(t){t.target.composing||e.$set(e.shelly,"server_url",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.shelly.device_id,expression:"shelly.device_id"}],staticClass:"form-control mb-1",attrs:{type:"text",placeholder:"device_id: ..."},domProps:{value:e.shelly.device_id},on:{input:function(t){t.target.composing||e.$set(e.shelly,"device_id",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.shelly.auth_key,expression:"shelly.auth_key"}],staticClass:"form-control mb-1",attrs:{type:"text",placeholder:"auth_key: ..."},domProps:{value:e.shelly.auth_key},on:{input:function(t){t.target.composing||e.$set(e.shelly,"auth_key",t.target.value)}}}),t("div",{staticClass:"flex-grow-1"}),t("button",{staticClass:"btn btn-dark",on:{click:e.save}},[e._v("Speichern")])])])},l=[],r={components:{},name:"SettingComponent",emits:["save"],props:{open:Boolean},data(){return{google:{client_id:"",api_key:"",data:[]},openweather:{url:"",timestamp:null,data:[],sunrise:null,sunset:null},shelly:{server_url:"",device_id:"",auth_key:""}}},methods:{save:function(){this.$settings.set(this.$data),this.$emit("save","Daten gespeichert")}},mounted(){const e=this.$settings.get();this.google=e.google,this.openweather=e.openweather,this.shelly=e.shelly}},c=r,d=s(3736),p=(0,d.Z)(c,o,l,!1,null,"ea0a584c",null),u=p.exports,h=function(){var e=this,t=e._self._c;return e.openweather?t("div",{ref:"window",staticClass:"d-flex flex-column animated temp vw-100",class:e.windowCssClass,on:{animationstart:e.animationStart,animationend:e.animationEnd,click:e.showMore}},[t("div",{ref:"panel",staticClass:"pt-2 pb-2 bg-transparent"},[t("div",{staticClass:"d-flex justify-content-around"},[t("div",[t("span",{staticClass:"mt-4 mb-4"},[t("img",{attrs:{width:"100px",src:e.image(e.icon)},on:{load:e.setProperties}})]),t("span",{staticClass:"display-1 mb-4"},[e._v(e._s(parseInt(e.current))+" °")])])]),t("div",{staticClass:"ps-3 d-flex d-flex justify-content-between"},[t("shortLayout",{attrs:{title:"MaxTemp",value:e.max,code:"°"}}),t("shortLayout",{attrs:{title:"MinTemp",value:e.min,code:"°"}})],1),t("div",{staticClass:"ps-3 d-flex justify-content-between"},[t("shortLayout",{attrs:{title:"Humidity",value:e.humidity,code:"%"}}),t("shortLayout",{attrs:{title:"RealFeel",value:e.feels_like,code:"°"}})],1)]),t("div",{staticClass:"d-flex flex-column flex-nowrap vw-100 flex-grow-1 pt-1 ps-3 pe-3",staticStyle:{margin:"0px","scroll-snap-type":"x mandatory"}},e._l(e.openweather.data,(function(s){return t("div",{key:s.dt,staticClass:"d-flex flex-row align-items-center mb-3 detail",staticStyle:{"min-width":"40vw","scroll-snap-align":"center"}},[t("span",{staticClass:"p-3"},[e._v(" "+e._s(e.$moment.StringToDate(s.dt_txt).getHours())+" Uhr")]),t("span",[t("img",{attrs:{width:"100px",src:e.image(s.weather[0].icon)}})]),t("span",{},[e._v(" "+e._s(s.weather[0].description))]),t("span",{staticClass:"p-3",staticStyle:{"min-width":"80px"}},[e._v(" "+e._s(parseInt(s.main.temp))+" °")])])})),0),t("div",{staticClass:"position-absolute bottom-0 end-0 overflow-hidden",staticStyle:{height:"80px",width:"120px"}},[t("button",{staticClass:"animated btn btn-primary rounded-circle m-1",class:{fadeInRight:e.showmore,fadeOutRight:!e.showmore}},[t("RefreshCwIcon",{on:{click:e.reload}})],1)])]):e._e()},m=[],g=function(){var e=this,t=e._self._c;return t("span",{staticClass:"d-flex flex-row",staticStyle:{"min-width":"40vw"}},[t("span",{staticClass:"line rounded me-3 mt-3 mb-3"}),t("div",{staticClass:"d-flex flex-column flex-grow-1"},[t("span",{staticClass:"text-secondary"},[e._v(e._s(e.title))]),t("span",{staticClass:"display-4"},[e._v(e._s(e.value)+" "+e._s(e.code))])])])},f=[],v={name:"layoutHelper",props:{title:String,value:Number,code:String}},w=v,y=(0,d.Z)(w,g,f,!1,null,"63cfd473",null),_=y.exports,x=s(6265),k=s.n(x),C=s(8054),b={components:{shortLayout:_,RefreshCwIcon:C.Iyk},name:"CurrentWeather",data(){return{max:0,min:0,current:0,icon:"",humidity:0,feels_like:0,showmore:!1,windowCssClass:"",openweather:{url:"",timestamp:null,data:[],sunrise:null,sunset:null}}},methods:{showMore:function(){this.showmore=!this.showmore,this.windowCssClass=this.showmore?"expand":"colapse"},image:function(e){return"http://openweathermap.org/img/wn/"+e+"@2x.png"},animationStart:function(e){-1!==e.animationName.indexOf("expand")&&(this.$refs.window.style.zIndex=3)},animationEnd:function(e){-1!==e.animationName.indexOf("colapse")&&(this.$refs.window.style.zIndex=void 0)},maxTemp:function(e){e.forEach((e=>{this.max<e.main.temp_max&&(this.max=parseInt(e.main.temp_max)),0===this.min&&(this.min=e.main.temp_min),0===this.humidity&&(this.humidity=parseInt(e.main.humidity)),this.min>e.main.temp_min&&(this.min=parseInt(e.main.temp_min)),0===this.current&&(this.current=e.main.temp),0===this.feels_like&&(this.feels_like=parseInt(e.main.feels_like)),""===this.icon&&(this.icon=e.weather[0].icon)}))},setProperties:function(){const e=this.$refs.panel.getBoundingClientRect();this.$refs.window.style.setProperty("--max-height",this.$refs.panel.clientHeight+"px"),this.$refs.window.style.setProperty("--offset-top",0-e.y+"px")},weather:function(){k().get(this.openweather.url).then((e=>{this.maxTemp(e.data.list),this.$settings.set({openweather:{timestamp:(new Date).getTime(),data:e.data.list,sunrise:e.data.city.sunrise,sunset:e.data.city.sunset}})}))},reload:function(){this.weather()}},watch:{openweather(e,t){this.maxTemp(e.data)}},created(){window.addEventListener("resize",this.setProperties)},destroyed(){window.removeEventListener("resize",this.setProperties)},mounted(){const e=this.$settings.get();this.openweather=e.openweather}},S=b,I=(0,d.Z)(S,h,m,!1,null,"15f60aae",null),T=I.exports,O=function(){var e=this,t=e._self._c;return t("div",{staticClass:"energie-meter-board p-1 ps-3 pe-3"},[t("div",{staticClass:"progress d-block",on:{click:e.reload}},[t("div",{staticClass:"progress-bar",style:{width:this.percent+"%"}},[e._v("   ")])]),t("div",{staticClass:"mt-1 d-flex flex-row justify-content-between"},[t("span",{staticClass:"p-2 text-secondary"},[e._v("Solar")]),t("span",{staticClass:"p-2 text-secondary"},[e._v(e._s(this.power)+" W")])])])},$=[],E={name:"EnergieMeterBoard",data(){return{power:null,timestamp:null,showSetting:!1,auth_key:"",device_id:"",server_url:"",max_power:800,percent:0}},methods:{reload:function(){this.power=0;const e="id="+this.device_id+"&auth_key="+this.auth_key;localStorage.settings&&k().post(this.server_url,e).then((e=>{this.power=parseFloat(e.data.data.device_status.meters[0].power),this.percent=100/this.max_power*this.power,this.timestamp=e.data.data.device_status.meters[0].timestamp}))}},mounted(){if(localStorage.settings){const e=JSON.parse(localStorage.settings);this.auth_key=e.shelly.auth_key,this.device_id=e.shelly.device_id,this.server_url=e.shelly.server_url,this.reload()}}},L=E,P=(0,d.Z)(L,O,$,!1,null,"5c8b9bee",null),N=P.exports,j=function(){var e=this,t=e._self._c;return e.google?t("div",{ref:"task",class:e.classList,on:{animationstart:e.animationStart,animationend:e.animationEnd,click:function(t){e.allTasks=!e.allTasks}}},[t("div",{staticClass:"display-6 text-start mb-4"},[e._v("Appointments")]),e._l(e.google.data,(function(s,i){return t("div",{key:s.id,staticClass:"mb-4 d-flex flex-row event",class:{"d-none":i>2&&!e.allTasks}},[t("span",{staticClass:"line rounded me-3 mb-2 mt-2"}),t("div",{staticClass:"d-flex flex-column flex-grow-1"},[t("span",{staticClass:"text-start"},[e._v(e._s(s.summary))]),t("span",{staticClass:"text-end text-secondary"},[e._v(e._s(e.$moment.StringToDate(s.start).toLocaleDateString()))])])])})),t("div",{staticClass:"position-absolute bottom-0 end-0 overflow-hidden",staticStyle:{height:"80px",width:"120px"}},[t("button",{staticClass:"animated btn btn-primary rounded-circle m-1",class:{fadeInRight:e.allTasks,fadeOutRight:!e.allTasks}},[t("RefreshCwIcon",{on:{click:e.handleAuthClick}})],1)])],2):t("div",[e._m(0)])},R=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"spinner-border",attrs:{role:"status"}},[t("span",{staticClass:"visually-hidden"},[e._v("Loading...")])])}],A=s(7508);const D="https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest",z="https://www.googleapis.com/auth/calendar.readonly",M={tokenClient:null,gapiInited:!1,gisInited:!1,clientId:"",apiKey:"",list:[],auth:(0,i.iH)(!1),init:(0,i.iH)(!1),_callback:null,load:function(e,t,s){this.clientId=e,this.apiKey=t,this._callback=s,(0,A.ve)("https://apis.google.com/js/api.js").then((()=>M.gapiLoaded())),(0,A.ve)("https://accounts.google.com/gsi/client").then((()=>M.gisLoaded()))},gapiLoaded:function(){window.gapi.load("client",M.intializeGapiClient)},intializeGapiClient:function(){window.gapi.client.init({apiKey:M.apiKey,discoveryDocs:[D]}).then((e=>{M.gapiInited=!0,M.maybeEnableButtons()}))},gisLoaded:function(){M.tokenClient=window.google.accounts.oauth2.initTokenClient({client_id:M.clientId,scope:z,callback:""}),M.gisInited=!0,M.maybeEnableButtons()},maybeEnableButtons:function(){M.gapiInited&&M.gisInited&&(M.init.value=!0,this.handleAuthClick())},handleAuthClick:function(){M.tokenClient.callback=e=>{if(void 0!==e.error)throw e;M.auth.value=!0,M.listUpcomingEvents()},null===window.gapi.client.getToken()?M.tokenClient.requestAccessToken({prompt:"consent"}):M.tokenClient.requestAccessToken({prompt:""})},handleSignoutClick:function(){const e=window.gapi.client.getToken();null!==e&&(window.google.accounts.oauth2.revoke(e.access_token),window.gapi.client.setToken(""),M.auth.value=!1)},listUpcomingEvents:async function(){let e;M.auth.value=!0;try{const t={calendarId:"primary",timeMin:(new Date).toISOString(),showDeleted:!1,singleEvents:!0,maxResults:10,orderBy:"startTime"};e=await window.gapi.client.calendar.events.list(t)}catch(i){return void(document.getElementById("content").innerText=i.message)}const t=e.result.items;if(!t||0===t.length)return this.list=[],void(this.tasks.value=this.list);const s=JSON.parse(JSON.stringify(t));s.forEach((e=>{this.list.push({id:e.id,summary:e.summary,start:e.start.dateTime||e.start.date})})),this._callback(this.list)}};var U={components:{RefreshCwIcon:C.Iyk},name:"TasksComponent",data(){return{info:null,allTasks:!1,init:!0,classList:["p-3","d-flex","flex-column","animated","list","flex-grow-1"],google:{client_id:"",api_key:"",data:[]}}},methods:{readed:function(e){this.$settings.set({google:{data:e}})},handleAuthClick:function(){M.load(this.google.client_id,this.google.api_key,this.readed)},animationStart:function(e){-1!==e.animationName.indexOf("expand")&&(this.$refs.task.style.zIndex=3)},animationEnd:function(e){-1!==e.animationName.indexOf("colapse")&&(this.$refs.task.style.zIndex="unset")},setProperties:function(){const e=this.$refs.task.getBoundingClientRect();this.$refs.task.style.setProperty("--max-height",this.$refs.task.clientHeight+"px"),this.$refs.task.style.setProperty("--offset-top",0-e.y+"px"),console.log(e)}},watch:{allTasks(e,t){const s=this.classList.indexOf("expand"),i=this.classList.indexOf("colapse");-1===s&&-1===i&&this.setProperties(),e?(-1!==i&&this.classList.splice(i,1),this.classList.push("expand")):(-1!==s&&this.classList.splice(s,1),this.classList.push("colapse"))}},mounted(){const e=this.$settings.get();this.$data.google=e.google}},Z=U,B=(0,d.Z)(Z,j,R,!1,null,"ed6b44c8",null),W=B.exports,H={name:"App",components:{MenuIcon:C.Oqj,XIcon:C.b0D,Tempe:T,Settings:u,EnergieMeter:N,Tasks:W},data:()=>({registration:null,isRefresh:!1,refreshing:!1,open:!1}),created(){document.addEventListener("serviceWorkerUpdateEvent",this.appUpdateUI,{once:!0}),navigator.serviceWorker.addEventListener("controllerchange",(()=>{this.refreshing||(this.refreshing=!0,window.location.reload())}))},methods:{onSave:function(e){this.open=!this.open},toggleSettings:function(){this.open=!this.open},appUpdateUI:function(e){this.registration=e.detail,this.isRefresh=!0},update:function(){this.isRefresh=!1,(this.registration||this.registration.waiting)&&this.registration.waiting.postMessage({type:"SKIP_WAITING"})}}},J=H,K=(0,d.Z)(J,n,a,!1,null,null,null),F=K.exports,G=s(9907);(0,G.z)("https://rzeiler.github.io/info/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(e){console.log("New content is available; please refresh."),document.dispatchEvent(new CustomEvent("serviceWorkerUpdateEvent",{detail:e}))},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),self.addEventListener("message",(e=>{e.data&&"SKIP_WAITING"===e.data.type&&self.skipWaiting()}));const q={StringToDate:e=>new Date(e)},X={calc:(e,t,s)=>e/(t*s)},Y={google:{client_id:"",api_key:"",data:[]},openweather:{url:"",timestamp:null,data:[],sunrise:null,sunset:null},shelly:{server_url:"",device_id:"",auth_key:""}},Q={get:function(){if(localStorage.settings){const e=JSON.parse(localStorage.settings);Object.keys(Y).forEach((function(t){void 0!==e[t]&&Object.keys(Y[t]).forEach((function(s){void 0!==e[t][s]&&(Y[t][s]=e[t][s])}))}))}return Y},set:function(e){const t=this.get(),s=JSON.parse(JSON.stringify(e));console.log(s),Object.keys(s).forEach((function(e){Object.keys(s[e]).forEach((function(i){t[e][i]=s[e][i]}))})),console.log("set",t),localStorage.settings=JSON.stringify(t)}};i.ZP.prototype.$moment=q,i.ZP.prototype.$gasconsumptioncalculator=X,i.ZP.prototype.$settings=Q,i.ZP.config.productionTip=!1,new i.ZP({render:e=>e(F)}).$mount("#app")}},t={};function s(i){var n=t[i];if(void 0!==n)return n.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,s),a.exports}s.m=e,function(){var e=[];s.O=function(t,i,n,a){if(!i){var o=1/0;for(d=0;d<e.length;d++){i=e[d][0],n=e[d][1],a=e[d][2];for(var l=!0,r=0;r<i.length;r++)(!1&a||o>=a)&&Object.keys(s.O).every((function(e){return s.O[e](i[r])}))?i.splice(r--,1):(l=!1,a<o&&(o=a));if(l){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[i,n,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var n,a,o=i[0],l=i[1],r=i[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(n in l)s.o(l,n)&&(s.m[n]=l[n]);if(r)var d=r(s)}for(t&&t(i);c<o.length;c++)a=o[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(d)},i=self["webpackChunkinfo"]=self["webpackChunkinfo"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(9817)}));i=s.O(i)})();
//# sourceMappingURL=app.1380bac1.js.map