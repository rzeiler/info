(function(){"use strict";var t={4294:function(t,e,s){var i=s(6369),n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app d-flex flex-column vw-100 vh-100 antiselect overflow-hidden"},[e("div",{staticClass:"d-flex justify-content-end p-3"},[t.open?t._e():e("MenuIcon",{staticClass:"top-most",on:{click:t.toggleSettings}}),t.open?e("XIcon",{staticClass:"top-most",on:{click:t.toggleSettings}}):t._e()],1),e("Tempe"),e("EnergieMeter"),e("tasks"),e("Settings",{attrs:{open:t.open},on:{save:t.onSave}}),t.isRefresh?e("button",{staticClass:"position-absolute btn btn-dark shadow u-btn",on:{click:t.update}},[t._v(" Update ")]):t._e()],1)},a=[],o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"position-absolute top-0 start-0 vh-100 vw-100 d-flex align-items-end animated",class:{zIn:t.open,zOut:!t.open}},[e("div",{staticClass:"d-flex flex-column justify-content-center bg-white shadow-lg p-3 vh-100 vw-100 animated",class:{slideInUp:t.open,slideOutDown:!t.open},attrs:{id:"set"}},[e("p",{staticClass:"display-6 mt-5"},[t._v("Settings")]),e("p",[t._v("Google Calender Api")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.google.client_id,expression:"google.client_id"}],staticClass:"form-control mb-1",attrs:{type:"text",placeholder:"CLIENT_ID: DDFG$§T"},domProps:{value:t.google.client_id},on:{input:function(e){e.target.composing||t.$set(t.google,"client_id",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.google.api_key,expression:"google.api_key"}],staticClass:"form-control mb-1",attrs:{type:"text",placeholder:"API_KEY: 2WR3..."},domProps:{value:t.google.api_key},on:{input:function(e){e.target.composing||t.$set(t.google,"api_key",e.target.value)}}}),e("p",[t._v("Openweather")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.openweather.url,expression:"openweather.url"}],staticClass:"form-control mb-1",attrs:{type:"text",placeholder:"URL: https://api.openweathermap.org/data/2.5/forecast/?q=London,de&appid=8021b4e46c033f8148e926c465998bee&units=metric&lang=de&cnt=10"},domProps:{value:t.openweather.url},on:{input:function(e){e.target.composing||t.$set(t.openweather,"url",e.target.value)}}}),e("p",[t._v("Shelly")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.shelly.server_url,expression:"shelly.server_url"}],staticClass:"form-control mb-1",attrs:{type:"text",placeholder:"server_url: ..."},domProps:{value:t.shelly.server_url},on:{input:function(e){e.target.composing||t.$set(t.shelly,"server_url",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.shelly.device_id,expression:"shelly.device_id"}],staticClass:"form-control mb-1",attrs:{type:"text",placeholder:"device_id: ..."},domProps:{value:t.shelly.device_id},on:{input:function(e){e.target.composing||t.$set(t.shelly,"device_id",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.shelly.auth_key,expression:"shelly.auth_key"}],staticClass:"form-control mb-1",attrs:{type:"text",placeholder:"auth_key: ..."},domProps:{value:t.shelly.auth_key},on:{input:function(e){e.target.composing||t.$set(t.shelly,"auth_key",e.target.value)}}}),e("div",{staticClass:"flex-grow-1"}),e("button",{staticClass:"btn btn-dark",on:{click:t.save}},[t._v("Speichern")])])])},l=[],r={components:{},name:"SettingComponent",emits:["save"],props:{open:Boolean},data(){return{google:{client_id:"",api_key:"",data:null},openweather:{url:""},shelly:{server_url:"",device_id:"",auth_key:""}}},methods:{save:function(){localStorage.settings=JSON.stringify(this.$data),this.$emit("save","Daten gespeichert")}},mounted(){if(localStorage.settings){const t=JSON.parse(localStorage.settings);this.google.client_id=t.google.client_id,this.google.api_key=t.google.api_key,this.openweather.url=t.openweather.url,this.shelly.server_url=t.shelly.server_url,this.shelly.device_id=t.shelly.device_id,this.shelly.auth_key=t.shelly.auth_key}}},c=r,d=s(3736),p=(0,d.Z)(c,o,l,!1,null,"24083eda",null),u=p.exports,h=function(){var t=this,e=t._self._c;return t.info?e("div",{ref:"window",staticClass:"d-flex flex-column animated temp vw-100",class:t.windowCssClass,on:{animationstart:t.animationStart,animationend:t.animationEnd,click:t.showMore}},[e("div",{ref:"panel",staticClass:"pt-2 pb-2 bg-transparent"},[e("div",{staticClass:"d-flex justify-content-around"},[e("div",[e("span",{staticClass:"mt-4 mb-4"},[e("img",{attrs:{width:"100px",src:t.image(t.icon)},on:{load:t.setProperties}})]),e("span",{staticClass:"display-1 mb-4"},[t._v(t._s(parseInt(t.current))+" °")])])]),e("div",{staticClass:"ps-3 d-flex d-flex justify-content-between"},[e("shortLayout",{attrs:{title:"MaxTemp",value:t.max,code:"°"}}),e("shortLayout",{attrs:{title:"MinTemp",value:t.min,code:"°"}})],1),e("div",{staticClass:"ps-3 d-flex justify-content-between"},[e("shortLayout",{attrs:{title:"Humidity",value:t.humidity,code:"%"}}),e("shortLayout",{attrs:{title:"RealFeel",value:t.feels_like,code:"°"}})],1)]),e("div",{staticClass:"d-flex flex-column flex-nowrap vw-100 flex-grow-1 pt-1 ps-3 pe-3",staticStyle:{margin:"0px","scroll-snap-type":"x mandatory"}},t._l(t.info.data.list,(function(s){return e("div",{key:s.dt,staticClass:"d-flex flex-row align-items-center mb-3 detail",staticStyle:{"min-width":"40vw","scroll-snap-align":"center"}},[e("span",{staticClass:"p-3"},[t._v(" "+t._s(t.$moment.StringToDate(s.dt_txt).getHours())+" Uhr")]),e("span",[e("img",{attrs:{width:"100px",src:t.image(s.weather[0].icon)}})]),e("span",{},[t._v(" "+t._s(s.weather[0].description))]),e("span",{staticClass:"p-3",staticStyle:{"min-width":"80px"}},[t._v(" "+t._s(parseInt(s.main.temp))+" °")])])})),0),e("div",{staticClass:"position-absolute bottom-0 end-0 overflow-hidden",staticStyle:{height:"80px",width:"120px"}},[e("button",{staticClass:"btn btn-primary rounded-circle m-1 animated",class:{fadeInRight:t.showmore,fadeOutRight:!t.showmore}},[e("RefreshCwIcon",{on:{click:t.reload}})],1)])]):t._e()},m=[],f=function(){var t=this,e=t._self._c;return e("span",{staticClass:"d-flex flex-row",staticStyle:{"min-width":"40vw"}},[e("span",{staticClass:"line rounded me-3 mt-3 mb-3"}),e("div",{staticClass:"d-flex flex-column flex-grow-1"},[e("span",{staticClass:"text-secondary"},[t._v(t._s(t.title))]),e("span",{staticClass:"display-4"},[t._v(t._s(t.value)+" "+t._s(t.code))])])])},g=[],v={name:"layoutHelper",props:{title:String,value:Number,code:String}},w=v,y=(0,d.Z)(w,f,g,!1,null,"63cfd473",null),_=y.exports,x=s(6265),k=s.n(x),C=s(8054),b={components:{shortLayout:_,RefreshCwIcon:C.Iyk},name:"CurrentWeather",data(){return{info:null,max:0,min:0,current:0,icon:"",humidity:0,feels_like:0,showmore:!1,windowCssClass:""}},methods:{showMore:function(){this.showmore=!this.showmore,this.windowCssClass=this.showmore?"expand":"colapse"},image:function(t){return"http://openweathermap.org/img/wn/"+t+"@2x.png"},animationStart:function(t){-1!==t.animationName.indexOf("expand")&&(this.$refs.window.style.zIndex=3)},animationEnd:function(t){-1!==t.animationName.indexOf("colapse")&&(this.$refs.window.style.zIndex=void 0)},maxTemp:function(t){t.forEach((t=>{this.max<t.main.temp_max&&(this.max=parseInt(t.main.temp_max)),0===this.min&&(this.min=t.main.temp_min),0===this.humidity&&(this.humidity=parseInt(t.main.humidity)),this.min>t.main.temp_min&&(this.min=parseInt(t.main.temp_min)),0===this.current&&(this.current=t.main.temp),0===this.feels_like&&(this.feels_like=parseInt(t.main.feels_like)),""===this.icon&&(this.icon=t.weather[0].icon)}))},setProperties:function(){const t=this.$refs.panel.getBoundingClientRect();this.$refs.window.style.setProperty("--max-height",this.$refs.panel.clientHeight+"px"),this.$refs.window.style.setProperty("--offset-top",0-t.y+"px")},weather:function(){k().get("https://api.openweathermap.org/data/2.5/forecast/?q=Berlin,de&appid=8021b4e46c033f8148e926c465998bee&units=metric&lang=de&cnt=10").then((t=>{this.info=t,this.maxTemp(t.data.list),setTimeout((()=>{}),100)}))},reload:function(){this.weather()}},created(){window.addEventListener("resize",this.setProperties)},destroyed(){window.removeEventListener("resize",this.setProperties)},mounted(){this.weather()}},S=b,I=(0,d.Z)(S,h,m,!1,null,"710e47a8",null),T=I.exports,O=function(){var t=this,e=t._self._c;return e("div",{staticClass:"energie-meter-board p-1 ps-3 pe-3"},[e("div",{staticClass:"progress d-block",on:{click:t.reload}},[e("div",{staticClass:"progress-bar",style:{width:this.percent+"%"}},[t._v("   ")])]),e("div",{staticClass:"mt-1 d-flex flex-row justify-content-between"},[e("span",{staticClass:"p-2 text-secondary"},[t._v("Solar")]),e("span",{staticClass:"p-2 text-secondary"},[t._v(t._s(this.power)+" W")])])])},E=[],L={name:"EnergieMeterBoard",data(){return{power:null,timestamp:null,showSetting:!1,auth_key:"",device_id:"",server_url:"",max_power:800,percent:0}},methods:{reload:function(){this.power=0;const t="id="+this.device_id+"&auth_key="+this.auth_key;localStorage.settings&&k().post(this.server_url,t).then((t=>{this.power=parseFloat(t.data.data.device_status.meters[0].power),this.percent=100/this.max_power*this.power,this.timestamp=t.data.data.device_status.meters[0].timestamp}))}},mounted(){if(localStorage.settings){const t=JSON.parse(localStorage.settings);this.auth_key=t.shelly.auth_key,this.device_id=t.shelly.device_id,this.server_url=t.shelly.server_url,this.reload()}}},$=L,P=(0,d.Z)($,O,E,!1,null,"5c8b9bee",null),N=P.exports,j=function(){var t=this,e=t._self._c;return t.init?e("div",{ref:"task",class:t.classList,on:{animationstart:t.animationStart,animationend:t.animationEnd}},[t._l(t.tasks,(function(s,i){return e("div",{key:s.id,staticClass:"mb-4 d-flex flex-row event",class:{"d-none":i>0&&!t.allTasks}},[e("span",{staticClass:"line rounded me-3 mb-2 mt-2"}),e("div",{staticClass:"d-flex flex-column flex-grow-1"},[e("span",{staticClass:"text-start"},[t._v(t._s(s.summary))]),e("span",{staticClass:"text-end text-secondary"},[t._v(t._s(t.$moment.StringToDate(s.start).toLocaleDateString()))])])])})),t.auth?e("span",{staticClass:"m-auto btn btn-purple",on:{click:function(e){t.allTasks=!t.allTasks}}},[t._v("more")]):t._e(),t.init&&!t.auth?e("span",{staticClass:"m-auto btn btn-purple",attrs:{id:"authorize_button"},on:{click:t.handleAuthClick}},[t._v("Authorize")]):t._e(),t.init&&t.auth?e("span",{staticClass:"m-auto btn btn-purple",attrs:{id:"signout_button"},on:{click:t.handleSignoutClick}},[t._v("Sign Out")]):t._e()],2):e("div",[t._m(0)])},A=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"spinner-border",attrs:{role:"status"}},[e("span",{staticClass:"visually-hidden"},[t._v("Loading...")])])}],z=s(7508);const D="https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest",R="https://www.googleapis.com/auth/calendar.readonly",M={tokenClient:null,gapiInited:!1,gisInited:!1,clientId:"",apiKey:"",list:[],tasks:(0,i.iH)([]),auth:(0,i.iH)(!1),init:(0,i.iH)(!1),load:function(t,e){this.clientId=t,this.apiKey=e,(0,z.ve)("https://apis.google.com/js/api.js").then((()=>M.gapiLoaded())),(0,z.ve)("https://accounts.google.com/gsi/client").then((()=>M.gisLoaded()))},gapiLoaded:function(){window.gapi.load("client",M.intializeGapiClient)},intializeGapiClient:function(){window.gapi.client.init({apiKey:M.apiKey,discoveryDocs:[D]}).then((t=>{M.gapiInited=!0,M.maybeEnableButtons()}))},gisLoaded:function(){M.tokenClient=window.google.accounts.oauth2.initTokenClient({client_id:M.clientId,scope:R,callback:""}),M.gisInited=!0,M.maybeEnableButtons()},maybeEnableButtons:function(){M.gapiInited&&M.gisInited&&(M.init.value=!0)},handleAuthClick:function(){M.tokenClient.callback=t=>{if(void 0!==t.error)throw t;console.log(t),M.auth.value=!0,M.listUpcomingEvents()},null===window.gapi.client.getToken()?M.tokenClient.requestAccessToken({prompt:"consent"}):M.tokenClient.requestAccessToken({prompt:""})},handleSignoutClick:function(){const t=window.gapi.client.getToken();null!==t&&(window.google.accounts.oauth2.revoke(t.access_token),window.gapi.client.setToken(""),M.auth.value=!1)},listUpcomingEvents:async function(){let t;M.auth.value=!0;try{const e={calendarId:"primary",timeMin:(new Date).toISOString(),showDeleted:!1,singleEvents:!0,maxResults:10,orderBy:"startTime"};t=await window.gapi.client.calendar.events.list(e)}catch(i){return void(document.getElementById("content").innerText=i.message)}const e=t.result.items;if(!e||0===e.length)return this.list=[],void(this.tasks.value=this.list);const s=JSON.parse(JSON.stringify(e));console.log(s),s.forEach((t=>{this.list.push({id:t.id,summary:t.summary,start:t.start.dateTime||t.start.date})})),this.tasks.value=this.list}};var U={components:{},name:"TasksComponent",data(){return{info:null,tasks:[],allTasks:!1,auth:!1,init:!1,classList:["ps-3","pe-3","d-flex","flex-column","justify-content-center","animated","flex-grow-1"]}},methods:{handleAuthClick:function(){M.handleAuthClick()},handleSignoutClick:function(){M.handleSignoutClick()},animationStart:function(t){-1!==t.animationName.indexOf("expand")&&(this.$refs.task.style.zIndex=3)},animationEnd:function(t){-1!==t.animationName.indexOf("colapse")&&(this.$refs.task.style.zIndex="unset")},setProperties:function(){const t=this.$refs.task.getBoundingClientRect();this.$refs.task.style.setProperty("--max-height",this.$refs.task.clientHeight+"px"),this.$refs.task.style.setProperty("--offset-top",0-t.y+"px")}},watch:{allTasks(t,e){const s=this.classList.indexOf("expand"),i=this.classList.indexOf("colapse");-1===s&&-1===i&&this.setProperties(),t?(-1!==i&&this.classList.splice(i,1),this.classList.push("expand")):(-1!==s&&this.classList.splice(s,1),this.classList.push("colapse"))}},mounted(){const t=JSON.parse(localStorage.settings);M.load(t.google.client_id,t.google.api_key),this.tasks=M.tasks,this.auth=M.auth,this.init=M.init}},B=U,W=(0,d.Z)(B,j,A,!1,null,"7621a4d7",null),Z=W.exports,H={name:"App",components:{MenuIcon:C.Oqj,XIcon:C.b0D,Tempe:T,Settings:u,EnergieMeter:N,Tasks:Z},data:()=>({registration:null,isRefresh:!1,refreshing:!1,open:!1}),created(){document.addEventListener("serviceWorkerUpdateEvent",this.appUpdateUI,{once:!0}),navigator.serviceWorker.addEventListener("controllerchange",(()=>{this.refreshing||(this.refreshing=!0,window.location.reload())}))},methods:{onSave:function(t){this.open=!this.open},toggleSettings:function(){this.open=!this.open},appUpdateUI:function(t){this.registration=t.detail,this.isRefresh=!0},update:function(){this.isRefresh=!1,(this.registration||this.registration.waiting)&&this.registration.waiting.postMessage({type:"SKIP_WAITING"})}}},K=H,q=(0,d.Z)(K,n,a,!1,null,null,null),F=q.exports,G=s(9907);(0,G.z)("https://rzeiler.github.io/info/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(t){console.log("New content is available; please refresh."),document.dispatchEvent(new CustomEvent("serviceWorkerUpdateEvent",{detail:t}))},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}}),self.addEventListener("message",(t=>{t.data&&"SKIP_WAITING"===t.data.type&&self.skipWaiting()}));const J={StringToDate:t=>new Date(t)};i.ZP.prototype.$moment=J,i.ZP.config.productionTip=!1,new i.ZP({render:t=>t(F)}).$mount("#app")}},e={};function s(i){var n=e[i];if(void 0!==n)return n.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,s),a.exports}s.m=t,function(){var t=[];s.O=function(e,i,n,a){if(!i){var o=1/0;for(d=0;d<t.length;d++){i=t[d][0],n=t[d][1],a=t[d][2];for(var l=!0,r=0;r<i.length;r++)(!1&a||o>=a)&&Object.keys(s.O).every((function(t){return s.O[t](i[r])}))?i.splice(r--,1):(l=!1,a<o&&(o=a));if(l){t.splice(d--,1);var c=n();void 0!==c&&(e=c)}}return e}a=a||0;for(var d=t.length;d>0&&t[d-1][2]>a;d--)t[d]=t[d-1];t[d]=[i,n,a]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var n,a,o=i[0],l=i[1],r=i[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(n in l)s.o(l,n)&&(s.m[n]=l[n]);if(r)var d=r(s)}for(e&&e(i);c<o.length;c++)a=o[c],s.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return s.O(d)},i=self["webpackChunkinfo"]=self["webpackChunkinfo"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(4294)}));i=s.O(i)})();
//# sourceMappingURL=app.c936f8df.js.map